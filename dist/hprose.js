// Hprose for WeChat App v2.0.0
// Copyright (c) 2008-2016 http://hprose.com
// Hprose is freely distributable under the MIT license.
// For all details and documentation:
// https://github.com/hprose/hprose-wx

function TimeoutError(e){Error.call(this),this.message=e,this.name=TimeoutError.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,TimeoutError)}var hprose=Object.create(null);!function(e){"use strict";function t(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return function(t){return e.apply(t,Array.prototype.slice.call(arguments,1))}}function r(e,r){for(var n=e.prototype,a=0,i=r.length;a<i;a++){var u=r[a],o=n[u];"function"==typeof o&&"undefined"==typeof e[u]&&Object.defineProperty(e,u,{value:t(o)})}}Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),r=this,n=function(){},a=function(){return r.apply(this instanceof n?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(n.prototype=this.prototype),a.prototype=new n,a}),r(Array,["pop","push","reverse","shift","sort","splice","unshift","concat","join","slice","indexOf","lastIndexOf","filter","forEach","every","map","some","reduce","reduceRight","includes","find","findIndex"]),r(String,["quote","substring","toLowerCase","toUpperCase","charAt","charCodeAt","indexOf","lastIndexOf","include","startsWith","endsWith","repeat","trim","trimLeft","trimRight","toLocaleLowerCase","toLocaleUpperCase","match","search","replace","split","substr","concat","slice"]),e.parseuri=function(e){var t=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),r=e.match(t),n=r[4].split(":",2);return{protocol:r[1],host:r[4],hostname:n[0],port:parseInt(n[1],10)||0,path:r[5],query:r[7],fragment:r[9]}},e.isObjectEmpty=function(e){if(e){var t;for(t in e)return!1}return!0}}(hprose),TimeoutError.prototype=Object.create(Error.prototype),TimeoutError.prototype.constructor=TimeoutError,function(e){"use strict";function t(e){var t=Array.prototype.slice.call(arguments,1);return function(){e.apply(void 0,t)}}function r(e){var t=i[e];if(t)try{t()}finally{delete i[e]}}function n(e){return i[a]=t.apply(void 0,e),a++}var a=1,i={};e.setImmediate=function(){return function(){var e=n(arguments);return setTimeout(t(r,e),0),e}}(),e.clearImmediate=function(e){delete i[e]}}(hprose),function(e){"use strict";function t(e){var t=Object.create(null),r=e.valueOf;Object.defineProperty(e,"valueOf",{value:function(n,a){return this===e&&a in o&&o[a]===n?(a in t||(t[a]=Object.create(null)),t[a]):r.apply(this,arguments)},writable:!0,configurable:!0,enumerable:!1})}function r(){var e=Object.create(null),n=c++;o[n]=e;var a=function(r){if(r!==Object(r))throw new Error("value is not a non-null object");var a=r.valueOf(e,n);return a!==r.valueOf()?a:(t(r),r.valueOf(e,n))},i=Object.create(r.prototype,{get:{value:function(e){return a(e).value}},set:{value:function(e,t){a(e).value=t}},has:{value:function(e){return"value"in a(e)}},delete:{value:function(e){return delete a(e).value}},clear:{value:function(){delete o[n],n=c++,o[n]=e}}});if(arguments.length>0&&Array.isArray(arguments[0]))for(var u=arguments[0],s=0,f=u.length;s<f;s++)i.set(u[s][0],u[s][1]);return i}function n(){var e=Object.create(null),r=c++,n=Object.create(null);o[r]=e;var a=function(a){if(null===a)return n;var i=a.valueOf(e,r);return i!==a.valueOf()?i:(t(a),a.valueOf(e,r))};return{get:function(e){return a(e).value},set:function(e,t){a(e).value=t},has:function(e){return"value"in a(e)},delete:function(e){return delete a(e).value},clear:function(){delete o[r],r=c++,o[r]=e}}}function a(){var e=Object.create(null);return{get:function(){return e.value},set:function(t,r){e.value=r},has:function(){return"value"in e},delete:function(){return delete e.value},clear:function(){e=Object.create(null)}}}function i(){var e=Object.create(null);return{get:function(t){return e[t]},set:function(t,r){e[t]=r},has:function(t){return t in e},delete:function(t){return delete e[t]},clear:function(){e=Object.create(null)}}}function u(){var e={number:i(),string:i(),boolean:i(),object:n(),function:n(),unknown:n(),undefined:a(),null:a()},t=0,r=[],o=Object.create(u.prototype,{size:{get:function(){return t}},get:{value:function(t){return e[typeof t].get(t)}},set:{value:function(n,a){this.has(n)||(r.push(n),t++),e[typeof n].set(n,a)}},has:{value:function(t){return e[typeof t].has(t)}},delete:{value:function(n){return!!this.has(n)&&(t--,r.splice(r.indexOf(n),1),e[typeof n].delete(n))}},clear:{value:function(){r.length=0;for(var n in e)e[n].clear();t=0}},forEach:{value:function(e,t){for(var n=0,a=r.length;n<a;n++)e.call(t,this.get(r[n]),r[n],this)}}});if(arguments.length>0&&Array.isArray(arguments[0]))for(var c=arguments[0],s=0,f=c.length;s<f;s++)o.set(c[s][0],c[s][1]);return o}var o=Object.create(null),c=0;return"function"==typeof Map&&"function"==typeof WeakMap?(e.Map=Map,void(e.WeakMap=WeakMap)):(e.Map=u,void(e.WeakMap=r))}(hprose),function(e,t){"use strict";function r(e){var t=this;Object.defineProperties(t,{_subscribers:{value:[]},resolve:{value:this.resolve.bind(t)},reject:{value:this.reject.bind(t)}}),"function"==typeof e&&G(function(){try{t.resolve(e())}catch(e){t.reject(e)}})}function n(e){return e instanceof r}function a(e){return"function"==typeof e.then}function i(e,t){var n="function"==typeof t?t:function(){return t},a=new r;return setTimeout(function(){try{a.resolve(n())}catch(e){a.reject(e)}},e),a}function u(e){var t=new r;return t.reject(e),t}function o(e){var t=new r;return t.resolve(e),t}function c(e){try{var t=e();return o(t)}catch(e){return u(e)}}function s(e){var t=new r;return e(t.resolve,t.reject),t}function f(e){var t=0;return Array.forEach(e,function(){++t}),t}function l(e){return e=a(e)?e:o(e),e.then(function(e){var t=e.length,n=f(e),a=new Array(t);if(0===n)return o(a);var i=new r;return Array.forEach(e,function(e,t){O(e).then(function(e){a[t]=e,0===--n&&i.resolve(a)},i.reject)}),i})}function h(){return l(arguments)}function v(e){return e=a(e)?e:o(e),e.then(function(e){var t=new r;return Array.forEach(e,function(e){O(e).fill(t)}),t})}function g(e){return e=a(e)?e:o(e),e.then(function(e){var t=e.length,n=f(e);if(0===n)throw new RangeError("any(): array must not be empty");var a=new Array(t),i=new r;return Array.forEach(e,function(e,t){O(e).then(i.resolve,function(e){a[t]=e,0===--n&&i.reject(a)})}),i})}function d(e){return e=a(e)?e:o(e),e.then(function(e){var t=e.length,n=f(e),a=new Array(t);if(0===n)return o(a);var i=new r;return Array.forEach(e,function(e,t){var r=O(e);r.whenComplete(function(){a[t]=r.inspect(),0===--n&&i.resolve(a)})}),i})}function p(e){var t=function(){return this}(),r=Array.slice(arguments,1);return l(r).then(function(r){return e.apply(t,r)})}function w(e,t){var r=Array.slice(arguments,2);return l(r).then(function(r){return e.apply(t,r)})}function T(e){return"function"==typeof e.next&&"function"==typeof e.throw}function y(e){if(!e)return!1;var t=e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName||T(t.prototype))}function b(e){var t=function(){return this}(),n=new r;return e.call(t,function(e,t){return arguments.length<2?e instanceof Error?n.reject(e):n.resolve(e):e?n.reject(e):(arguments.length>2&&(t=Array.slice(arguments,1)),void n.resolve(t))}),n}function m(e){return function(){var t=Array.slice(arguments,0),n=this,a=new r;t.push(function(){n=this,a.resolve(arguments)});try{e.apply(this,t)}catch(e){a.resolve([e])}return function(e){a.then(function(t){e.apply(n,t)})}}}function C(e){return function(){var t=Array.slice(arguments,0),n=new r;t.push(function(e,t){return arguments.length<2?e instanceof Error?n.reject(e):n.resolve(e):e?n.reject(e):(arguments.length>2&&(t=Array.slice(arguments,1)),void n.resolve(t))});try{e.apply(this,t)}catch(e){n.reject(e)}return n}}function O(e){return e?a(e)?e:y(e)||T(e)?_(e):"function"==typeof e?b(e):o(e):o(e)}function _(e){function t(t){try{a(e.next(t))}catch(e){o.reject(e)}}function n(t){try{a(e.throw(t))}catch(e){return o.reject(e)}}function a(e){e.done?o.resolve(e.value):O(e.value).then(t,n)}var i=function(){return this}();if("function"==typeof e){var u=Array.slice(arguments,1);e=e.apply(i,u)}var o=new r;return e&&"function"==typeof e.next?(t(),o):o.resolve(e)}function j(e,t){return function(){return t=t||this,l(arguments).then(function(r){var n=e.apply(t,r);return y(n)?_.call(t,n):n})}}function E(e,t,r){return r=r||function(){return this}(),l(e).then(function(e){return e.forEach(t,r)})}function A(e,t,r){return r=r||function(){return this}(),l(e).then(function(e){return e.every(t,r)})}function k(e,t,r){return r=r||function(){return this}(),l(e).then(function(e){return e.some(t,r)})}function S(e,t,r){return r=r||function(){return this}(),l(e).then(function(e){return e.filter(t,r)})}function R(e,t,r){return r=r||function(){return this}(),l(e).then(function(e){return e.map(t,r)})}function U(e,t,r){return arguments.length>2?l(e).then(function(e){return a(r)||(r=o(r)),r.then(function(r){return e.reduce(t,r)})}):l(e).then(function(e){return e.reduce(t)})}function F(e,t,r){return arguments.length>2?l(e).then(function(e){return a(r)||(r=o(r)),r.then(function(r){return e.reduceRight(t,r)})}):l(e).then(function(e){return e.reduceRight(t)})}function M(e,t,r){return l(e).then(function(e){return a(t)||(t=o(t)),t.then(function(t){return e.indexOf(t,r)})})}function I(e,r,n){return l(e).then(function(e){return a(r)||(r=o(r)),r.then(function(r){return n===t&&(n=e.length-1),e.lastIndexOf(r,n)})})}function x(e,t,r){return l(e).then(function(e){return a(t)||(t=o(t)),t.then(function(t){return e.includes(t,r)})})}function N(e,t,r){return r=r||function(){return this}(),l(e).then(function(e){return e.find(t,r)})}function P(e,t,r){return r=r||function(){return this}(),l(e).then(function(e){return e.findIndex(t,r)})}function W(e,t,r){G(function(){try{var n=e(r);t.resolve(n)}catch(e){t.reject(e)}})}function L(e,t,r){e?W(e,t,r):t.resolve(r)}function D(e,t,r){e?W(e,t,r):t.reject(r)}function z(){var e=new r;Object.defineProperties(this,{future:{value:e},complete:{value:e.resolve},completeError:{value:e.reject},isCompleted:{get:function(){return e._state!==B}}})}function H(e){r.call(this),e(this.resolve,this.reject)}var B=0,q=1,Q=2,G=e.setImmediate;return Object.defineProperties(r,{delayed:{value:i},error:{value:u},sync:{value:c},value:{value:o},all:{value:l},race:{value:v},resolve:{value:o},reject:{value:u},promise:{value:s},isFuture:{value:n},isPromise:{value:a},toPromise:{value:O},join:{value:h},any:{value:g},settle:{value:d},attempt:{value:p},run:{value:w},thunkify:{value:m},promisify:{value:C},co:{value:_},wrap:{value:j},forEach:{value:E},every:{value:A},some:{value:k},filter:{value:S},map:{value:R},reduce:{value:U},reduceRight:{value:F},indexOf:{value:M},lastIndexOf:{value:I},includes:{value:x},find:{value:N},findIndex:{value:P}}),Object.defineProperties(r.prototype,{_value:{writable:!0},_reason:{writable:!0},_state:{value:B,writable:!0},resolve:{value:function(e){if(e===this)return void this.reject(new TypeError("Self resolution"));if(n(e))return void e.fill(this);if(null!==e&&"object"==typeof e||"function"==typeof e){var t;try{t=e.then}catch(e){return void this.reject(e)}if("function"==typeof t){var r=!0;try{var a=this;return void t.call(e,function(e){r&&(r=!1,a.resolve(e))},function(e){r&&(r=!1,a.reject(e))})}catch(e){r&&(r=!1,this.reject(e))}return}}if(this._state===B){this._state=q,this._value=e;for(var i=this._subscribers;i.length>0;){var u=i.shift();L(u.onfulfill,u.next,e)}}}},reject:{value:function(e){if(this._state===B){this._state=Q,this._reason=e;for(var t=this._subscribers;t.length>0;){var r=t.shift();D(r.onreject,r.next,e)}}}},then:{value:function(e,t){"function"!=typeof e&&(e=null),"function"!=typeof t&&(t=null);var n=new r;return this._state===q?L(e,n,this._value):this._state===Q?D(t,n,this._reason):this._subscribers.push({onfulfill:e,onreject:t,next:n}),n}},done:{value:function(e,t){this.then(e,t).then(null,function(e){G(function(){throw e})})}},inspect:{value:function(){switch(this._state){case B:return{state:"pending"};case q:return{state:"fulfilled",value:this._value};case Q:return{state:"rejected",reason:this._reason}}}},catchError:{value:function(e,t){if("function"==typeof t){var r=this;return this.catch(function(n){if(t(n))return r.catch(e);throw n})}return this.catch(e)}},catch:{value:function(e){return this.then(null,e)}},fail:{value:function(e){this.done(null,e)}},whenComplete:{value:function(e){return this.then(function(t){return e(),t},function(t){throw e(),t})}},complete:{value:function(e){return this.then(e,e)}},always:{value:function(e){this.done(e,e)}},fill:{value:function(e){this.then(e.resolve,e.reject)}},timeout:{value:function(e,t){var n=new r,a=setTimeout(function(){n.reject(t||new TimeoutError("timeout"))},e);return this.whenComplete(function(){clearTimeout(a)}).fill(n),n}},delay:{value:function(e){var t=new r;return this.then(function(r){setTimeout(function(){t.resolve(r)},e)},t.reject),t}},tap:{value:function(e,t){return this.then(function(r){return e.call(t,r),r})}},spread:{value:function(e,t){return this.then(function(r){return e.apply(t,r)})}},get:{value:function(e){return this.then(function(t){return t[e]})}},set:{value:function(e,t){return this.then(function(r){return r[e]=t,r})}},apply:{value:function(e,t){return t=t||[],this.then(function(r){return l(t).then(function(t){return r[e].apply(r,t)})})}},call:{value:function(e){var t=Array.slice(arguments,1);return this.then(function(r){return l(t).then(function(t){return r[e].apply(r,t)})})}},bind:{value:function(e){var t=Array.slice(arguments);{if(!Array.isArray(e)){t.shift();var r=this;return Object.defineProperty(this,e,{value:function(){var n=Array.slice(arguments);return r.then(function(r){return l(t.concat(n)).then(function(t){return r[e].apply(r,t)})})}}),this}for(var n=0,a=e.length;n<a;++n)t[0]=e[n],this.bind.apply(this,t)}}},forEach:{value:function(e,t){return E(this,e,t)}},every:{value:function(e,t){return A(this,e,t)}},some:{value:function(e,t){return k(this,e,t)}},filter:{value:function(e,t){return S(this,e,t)}},map:{value:function(e,t){return R(this,e,t)}},reduce:{value:function(e,t){return arguments.length>1?U(this,e,t):U(this,e)}},reduceRight:{value:function(e,t){return arguments.length>1?F(this,e,t):F(this,e)}},indexOf:{value:function(e,t){return M(this,e,t)}},lastIndexOf:{value:function(e,t){return I(this,e,t)}},includes:{value:function(e,t){return x(this,e,t)}},find:{value:function(e,t){return N(this,e,t)}},findIndex:{value:function(e,t){return P(this,e,t)}}}),e.Future=r,e.thunkify=m,e.promisify=C,e.co=_,e.co.wrap=e.wrap=j,e.Completer=z,e.resolved=o,e.rejected=u,e.deferred=function(){var e=new r;return Object.create(null,{promise:{value:e},resolve:{value:e.resolve},reject:{value:e.reject}})},"function"==typeof Promise?void(e.Promise=Promise):(H.prototype=Object.create(r.prototype),H.prototype.constructor=r,Object.defineProperties(H,{all:{value:l},race:{value:v},resolve:{value:o},reject:{value:u}}),void(e.Promise=H))}(hprose),function(e,t){"use strict";function r(e){return String.fromCharCode(e>>>24&255,e>>>16&255,e>>>8&255,255&e)}function n(e){return String.fromCharCode(255&e,e>>>8&255,e>>>16&255,e>>>24&255)}function a(e){for(var t=[],r=e.length,n=0,a=0;n<r;++n,++a){var i=e.charCodeAt(n);if(i<128)t[a]=e.charAt(n);else if(i<2048)t[a]=String.fromCharCode(192|i>>6,128|63&i);else{if(!(i<55296||i>57343)){if(n+1<r){var u=e.charCodeAt(n+1);if(i<56320&&56320<=u&&u<=57343){var o=((1023&i)<<10|1023&u)+65536;t[a]=String.fromCharCode(240|o>>18&63,128|o>>12&63,128|o>>6&63,128|63&o),++n;continue}}throw new Error("Malformed string")}t[a]=String.fromCharCode(224|i>>12,128|i>>6&63,128|63&i)}}return t.join("")}function i(e,t){for(var r=new Array(t),n=0,a=0,i=e.length;n<t&&a<i;n++){var u=e.charCodeAt(a++);switch(u>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:r[n]=u;break;case 12:case 13:if(a<i){r[n]=(31&u)<<6|63&e.charCodeAt(a++);break}throw new Error("Unfinished UTF-8 octet sequence");case 14:if(a+1<i){r[n]=(15&u)<<12|(63&e.charCodeAt(a++))<<6|63&e.charCodeAt(a++);break}throw new Error("Unfinished UTF-8 octet sequence");case 15:if(a+2<i){var o=((7&u)<<18|(63&e.charCodeAt(a++))<<12|(63&e.charCodeAt(a++))<<6|63&e.charCodeAt(a++))-65536;if(0<=o&&o<=1048575){r[n++]=o>>10&1023|55296,r[n]=1023&o|56320;break}throw new Error("Character outside valid Unicode range: 0x"+o.toString(16))}throw new Error("Unfinished UTF-8 octet sequence");default:throw new Error("Bad UTF-8 encoding 0x"+u.toString(16))}}return n<t&&(r.length=n),[String.fromCharCode.apply(String,r),a]}function u(e,t){for(var r=[],n=new Array(32768),a=0,i=0,u=e.length;a<t&&i<u;a++){var o=e.charCodeAt(i++);switch(o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:n[a]=o;break;case 12:case 13:if(i<u){n[a]=(31&o)<<6|63&e.charCodeAt(i++);break}throw new Error("Unfinished UTF-8 octet sequence");case 14:if(i+1<u){n[a]=(15&o)<<12|(63&e.charCodeAt(i++))<<6|63&e.charCodeAt(i++);break}throw new Error("Unfinished UTF-8 octet sequence");case 15:if(i+2<u){var c=((7&o)<<18|(63&e.charCodeAt(i++))<<12|(63&e.charCodeAt(i++))<<6|63&e.charCodeAt(i++))-65536;if(0<=c&&c<=1048575){n[a++]=c>>10&1023|55296,n[a]=1023&c|56320;break}throw new Error("Character outside valid Unicode range: 0x"+c.toString(16))}throw new Error("Unfinished UTF-8 octet sequence");default:throw new Error("Bad UTF-8 encoding 0x"+o.toString(16))}if(a>=32766){var s=a+1;n.length=s,r[r.length]=String.fromCharCode.apply(String,n),t-=s,a=-1}}return a>0&&(n.length=a,r[r.length]=String.fromCharCode.apply(String,n)),[r.join(""),i]}function o(e,r){return(r===t||null===r||r<0)&&(r=e.length),0===r?["",0]:r<65535?i(e,r):u(e,r)}function c(e,r){if((r===t||null===r||r<0)&&(r=e.length),0===r)return"";for(var n=0,a=0,i=e.length;n<r&&a<i;n++){var u=e.charCodeAt(a++);switch(u>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:break;case 12:case 13:if(a<i){++a;break}throw new Error("Unfinished UTF-8 octet sequence");case 14:if(a+1<i){a+=2;break}throw new Error("Unfinished UTF-8 octet sequence");case 15:if(a+2<i){var o=((7&u)<<18|(63&e.charCodeAt(a++))<<12|(63&e.charCodeAt(a++))<<6|63&e.charCodeAt(a++))-65536;if(0<=o&&o<=1048575)break;throw new Error("Character outside valid Unicode range: 0x"+o.toString(16))}throw new Error("Unfinished UTF-8 octet sequence");default:throw new Error("Bad UTF-8 encoding 0x"+u.toString(16))}}return e.substr(0,a)}function s(e){return o(e)[0]}function f(e){for(var t=e.length,r=0,n=0;n<t;++n){var a=e.charCodeAt(n);if(a<128)++r;else if(a<2048)r+=2;else{if(!(a<55296||a>57343)){if(n+1<t){var i=e.charCodeAt(n+1);if(a<56320&&56320<=i&&i<=57343){++n,r+=4;continue}}throw new Error("Malformed string")}r+=3}}return r}function l(e){for(var t=e.length,r=0,n=0;n<t;++n,++r){var a=e.charCodeAt(n);switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:break;case 12:case 13:if(n<t){++n;break}throw new Error("Unfinished UTF-8 octet sequence");case 14:if(n+1<t){n+=2;break}throw new Error("Unfinished UTF-8 octet sequence");case 15:if(n+2<t){var i=((7&a)<<18|(63&e.charCodeAt(n++))<<12|(63&e.charCodeAt(n++))<<6|63&e.charCodeAt(n++))-65536;if(0<=i&&i<=1048575){++r;break}throw new Error("Character outside valid Unicode range: 0x"+i.toString(16))}throw new Error("Unfinished UTF-8 octet sequence");default:throw new Error("Bad UTF-8 encoding 0x"+a.toString(16))}}return r}function h(e){for(var t=0,r=e.length;t<r;++t){var n=e.charCodeAt(t);switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:break;case 12:case 13:if(t<r){++t;break}return!1;case 14:if(t+1<r){t+=2;break}return!1;case 15:if(t+2<r){var a=((7&n)<<18|(63&e.charCodeAt(t++))<<12|(63&e.charCodeAt(t++))<<6|63&e.charCodeAt(t++))-65536;if(0<=a&&a<=1048575)break}return!1;default:return!1}}return!0}function v(){var e=arguments;switch(e.length){case 1:this._buffer=[e[0].toString()];break;case 2:this._buffer=[e[0].toString().substr(e[1])];break;case 3:this._buffer=[e[0].toString().substr(e[1],e[2])];break;default:this._buffer=[""]}this.mark()}Object.defineProperties(v.prototype,{_buffer:{writable:!0},_off:{value:0,writable:!0},_wmark:{writable:!0},_rmark:{writable:!0},toString:{value:function(){return this._buffer.length>1&&(this._buffer=[this._buffer.join("")]),this._buffer[0]}},length:{get:function(){return this.toString().length}},position:{get:function(){return this._off}},mark:{value:function(){this._wmark=this.length,this._rmark=this._off}},reset:{value:function(){this._buffer=[this.toString().substr(0,this._wmark)],this._off=this._rmark}},clear:{value:function(){this._buffer=[""],this._wmark=0,this._off=0,this._rmark=0}},writeByte:{value:function(e){this._buffer.push(String.fromCharCode(255&e))}},writeInt32BE:{value:function(e){if(e===(0|e)&&e<=2147483647)return void this._buffer.push(r(e));throw new TypeError("value is out of bounds")}},writeUInt32BE:{value:function(e){if((2147483647&e)+2147483648===e&&e>=0)return void this._buffer.push(r(0|e));throw new TypeError("value is out of bounds")}},writeInt32LE:{value:function(e){if(e===(0|e)&&e<=2147483647)return void this._buffer.push(n(e));throw new TypeError("value is out of bounds")}},writeUInt32LE:{value:function(e){if((2147483647&e)+2147483648===e&&e>=0)return void this._buffer.push(n(0|e));throw new TypeError("value is out of bounds")}},writeUTF16AsUTF8:{value:function(e){this._buffer.push(a(e))}},writeUTF8AsUTF16:{value:function(e){this._buffer.push(s(e))}},write:{value:function(e){this._buffer.push(e)}},readByte:{value:function(){return this._off<this.length?this._buffer[0].charCodeAt(this._off++):-1}},readChar:{value:function(){return this._off<this.length?this._buffer[0].charAt(this._off++):""}},readInt32BE:{value:function(){var e=this.length,t=this._buffer[0],r=this._off;if(r+3<e){var n=t.charCodeAt(r++)<<24|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<8|t.charCodeAt(r++);return this._off=r,n}throw new Error("EOF")}},readUInt32BE:{value:function(){var e=this.readInt32BE();return e<0?(2147483647&e)+2147483648:e}},readInt32LE:{value:function(){var e=this.length,t=this._buffer[0],r=this._off;if(r+3<e){var n=t.charCodeAt(r++)|t.charCodeAt(r++)<<8|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<24;return this._off=r,n}throw new Error("EOF")}},readUInt32LE:{value:function(){var e=this.readInt32LE();return e<0?(2147483647&e)+2147483648:e}},read:{value:function(e){var t=this._off,r=this.length;return t+e>r&&(e=r-t),0===e?"":(this._off=t+e,this._buffer[0].substring(t,this._off))}},skip:{value:function(e){var t=this.length;return this._off+e>t?(e=t-this._off,this._off=t):this._off+=e,e}},readString:{value:function(e){var t=this.length,r=this._off,n=this._buffer[0],a=n.indexOf(e,r);return a===-1?(n=n.substr(r),this._off=t):(n=n.substring(r,a+1),this._off=a+1),n}},readUntil:{value:function(e){var t=this.length,r=this._off,n=this._buffer[0],a=n.indexOf(e,r);return a===this._off?(n="",this._off++):a===-1?(n=n.substr(r),this._off=t):(n=n.substring(r,a),this._off=a+1),n}},readUTF8:{value:function(e){var t=this.length,r=c(this._buffer[0].substring(this._off,Math.min(this._off+3*e,t)),e);return this._off+=r.length,r}},readUTF8AsUTF16:{value:function(e){var t=this.length,r=o(this._buffer[0].substring(this._off,Math.min(this._off+3*e,t)),e);return this._off+=r[1],r[0]}},readUTF16AsUTF8:{value:function(e){return a(this.read(e))}},take:{value:function(){var e=this.toString();return this.clear(),e}},clone:{value:function(){return new v(this.toString())}},trunc:{value:function(){var e=this.toString().substring(this._off,this._length);this._buffer[0]=e,this._off=0,this._wmark=0,this._rmark=0}}}),Object.defineProperties(v,{utf8Encode:{value:a},utf8Decode:{value:s},utf8Length:{value:f},utf16Length:{value:l},isUTF8:{value:h}}),e.StringIO=v}(hprose),hprose.Tags={TagInteger:"i",TagLong:"l",TagDouble:"d",TagNull:"n",TagEmpty:"e",TagTrue:"t",TagFalse:"f",TagNaN:"N",TagInfinity:"I",TagDate:"D",TagTime:"T",TagUTC:"Z",TagBytes:"b",TagUTF8Char:"u",TagString:"s",TagGuid:"g",TagList:"a",TagMap:"m",TagClass:"c",TagObject:"o",TagRef:"r",TagPos:"+",TagNeg:"-",TagSemicolon:";",TagOpenbrace:"{",TagClosebrace:"}",TagQuote:'"',TagPoint:".",TagFunctions:"F",TagCall:"C",TagResult:"R",TagArgument:"A",TagError:"E",TagEnd:"z"},function(e){"use strict";function t(e,t){u.set(e,t),i[t]=e}function r(e){return u.get(e)}function n(e){return i[e]}var a=e.WeakMap,i=Object.create(null),u=new a;e.ClassManager=Object.create(null,{register:{value:t},getClassAlias:{value:r},getClass:{value:n}}),e.register=t,t(Object,"Object")}(hprose),function(e,t){"use strict";function r(e){var t=e.constructor,r=C.getClassAlias(t);if(r)return r;if(t.name)r=t.name;else{var n=t.toString();if(r=n.substr(0,n.indexOf("(")).replace(/(^\s*function\s*)|(\s*$)/gi,""),""===r||"Object"===r)return"function"==typeof e.getClassName?e.getClassName():"Object"}return"Object"!==r&&C.register(t,r),r}function n(e){Object.defineProperties(this,{_stream:{value:e},_ref:{value:new O,writable:!0}})}function a(e){return new n(e)}function i(e,t){Object.defineProperties(this,{stream:{value:e},_classref:{value:Object.create(null),writable:!0},_fieldsref:{value:[],writable:!0},_refer:{value:t?_:a(e)}})}function u(e,n){var a=e.stream;if(n===t||null===n||n.constructor===Function)return void a.write(m.TagNull);if(""===n)return void a.write(m.TagEmpty);switch(n.constructor){case Number:o(e,n);break;case Boolean:f(e,n);break;case String:1===n.length?(a.write(m.TagUTF8Char),a.write(n)):e.writeStringWithRef(n);break;case Date:e.writeDateWithRef(n);break;case O:e.writeMapWithRef(n);break;default:if(Array.isArray(n))e.writeListWithRef(n);else{var i=r(n);"Object"===i?e.writeMapWithRef(n):e.writeObjectWithRef(n)}}}function o(e,t){var r=e.stream;t=t.valueOf(),t===(0|t)?0<=t&&t<=9?r.write(t):(r.write(m.TagInteger),r.write(t),r.write(m.TagSemicolon)):s(e,t)}function c(e,t){var r=e.stream;0<=t&&t<=9?r.write(t):(t<-2147483648||t>2147483647?r.write(m.TagLong):r.write(m.TagInteger),r.write(t),r.write(m.TagSemicolon))}function s(e,t){var r=e.stream;t!==t?r.write(m.TagNaN):t!==1/0&&t!==-(1/0)?(r.write(m.TagDouble),r.write(t),r.write(m.TagSemicolon)):(r.write(m.TagInfinity),r.write(t>0?m.TagPos:m.TagNeg))}function f(e,t){e.stream.write(t.valueOf()?m.TagTrue:m.TagFalse)}function l(e,t){e._refer.set(t);var r=e.stream;r.write(m.TagDate),r.write(("0000"+t.getUTCFullYear()).slice(-4)),r.write(("00"+(t.getUTCMonth()+1)).slice(-2)),r.write(("00"+t.getUTCDate()).slice(-2)),r.write(m.TagTime),r.write(("00"+t.getUTCHours()).slice(-2)),r.write(("00"+t.getUTCMinutes()).slice(-2)),r.write(("00"+t.getUTCSeconds()).slice(-2));var n=t.getUTCMilliseconds();0!==n&&(r.write(m.TagPoint),r.write(("000"+n).slice(-3))),r.write(m.TagUTC)}function h(e,t){e._refer.set(t);var r=e.stream,n=("0000"+t.getFullYear()).slice(-4),a=("00"+(t.getMonth()+1)).slice(-2),i=("00"+t.getDate()).slice(-2),u=("00"+t.getHours()).slice(-2),o=("00"+t.getMinutes()).slice(-2),c=("00"+t.getSeconds()).slice(-2),s=("000"+t.getMilliseconds()).slice(-3);"00"===u&&"00"===o&&"00"===c&&"000"===s?(r.write(m.TagDate),r.write(n),r.write(a),r.write(i)):"1970"===n&&"01"===a&&"01"===i?(r.write(m.TagTime),r.write(u),r.write(o),r.write(c),"000"!==s&&(r.write(m.TagPoint),r.write(s))):(r.write(m.TagDate),r.write(n),r.write(a),r.write(i),r.write(m.TagTime),r.write(u),r.write(o),r.write(c),"000"!==s&&(r.write(m.TagPoint),r.write(s))),r.write(m.TagSemicolon)}function v(e,t){e._refer.set(t);var r=e.stream,n=("00"+t.getHours()).slice(-2),a=("00"+t.getMinutes()).slice(-2),i=("00"+t.getSeconds()).slice(-2),u=("000"+t.getMilliseconds()).slice(-3);r.write(m.TagTime),r.write(n),r.write(a),r.write(i),"000"!==u&&(r.write(m.TagPoint),r.write(u)),r.write(m.TagSemicolon)}function g(e,t){e._refer.set(t);var r=e.stream,n=t.length;r.write(m.TagString),n>0?(r.write(n),r.write(m.TagQuote),r.write(t)):r.write(m.TagQuote),r.write(m.TagQuote)}function d(e,t){e._refer.set(t);var r=e.stream,n=t.length;if(r.write(m.TagList),n>0){r.write(n),r.write(m.TagOpenbrace);for(var a=0;a<n;a++)u(e,t[a])}else r.write(m.TagOpenbrace);r.write(m.TagClosebrace)}function p(e,t){e._refer.set(t);var r=e.stream,n=[];for(var a in t)t.hasOwnProperty(a)&&"function"!=typeof t[a]&&(n[n.length]=a);var i=n.length;if(r.write(m.TagMap),i>0){r.write(i),r.write(m.TagOpenbrace);for(var o=0;o<i;o++)u(e,n[o]),u(e,t[n[o]])}else r.write(m.TagOpenbrace);r.write(m.TagClosebrace)}function w(e,t){e._refer.set(t);var r=e.stream,n=t.size;r.write(m.TagMap),n>0?(r.write(n),r.write(m.TagOpenbrace),t.forEach(function(t,r){u(e,r),u(e,t)})):r.write(m.TagOpenbrace),r.write(m.TagClosebrace)}function T(e,t){var n,a,i=e.stream,o=r(t);if(o in e._classref)a=e._classref[o],n=e._fieldsref[a];else{n=[];for(var c in t)t.hasOwnProperty(c)&&"function"!=typeof t[c]&&(n[n.length]=c.toString());a=y(e,o,n)}i.write(m.TagObject),i.write(a),i.write(m.TagOpenbrace),e._refer.set(t);for(var s=n.length,f=0;f<s;f++)u(e,t[n[f]]);i.write(m.TagClosebrace)}function y(e,t,r){var n=e.stream,a=r.length;if(n.write(m.TagClass),n.write(t.length),n.write(m.TagQuote),n.write(t),n.write(m.TagQuote),a>0){n.write(a),n.write(m.TagOpenbrace);for(var i=0;i<a;i++)g(e,r[i])}else n.write(m.TagOpenbrace);n.write(m.TagClosebrace);var u=e._fieldsref.length;return e._classref[t]=u,e._fieldsref[u]=r,u}var b=e.StringIO,m=e.Tags,C=e.ClassManager,O=(b.utf8Encode,e.Map),_=Object.create(null,{set:{value:function(){}},write:{value:function(){return!1}},reset:{value:function(){}}});Object.defineProperties(n.prototype,{_refcount:{value:0,writable:!0},set:{value:function(e){this._ref.set(e,this._refcount++)}},write:{value:function(e){var r=this._ref.get(e);return r!==t&&(this._stream.write(m.TagRef),this._stream.write(r),this._stream.write(m.TagSemicolon),!0)}},reset:{value:function(){this._ref=new O,this._refcount=0}}}),Object.defineProperties(i.prototype,{serialize:{value:function(e){u(this,e)}},writeInteger:{value:function(e){c(this,e)}},writeDouble:{value:function(e){s(this,e)}},writeBoolean:{value:function(e){f(this,e)}},writeUTCDate:{value:function(e){l(this,e)}},writeUTCDateWithRef:{value:function(e){this._refer.write(e)||l(this,e)}},writeDate:{value:function(e){h(this,e)}},writeDateWithRef:{value:function(e){this._refer.write(e)||h(this,e)}},writeTime:{value:function(e){v(this,e)}},writeTimeWithRef:{value:function(e){this._refer.write(e)||v(this,e)}},writeString:{value:function(e){g(this,e)}},writeStringWithRef:{value:function(e){this._refer.write(e)||g(this,e)}},writeList:{value:function(e){d(this,e)}},writeListWithRef:{value:function(e){this._refer.write(e)||d(this,e)}},writeMap:{value:function(e){e instanceof O?w(this,e):p(this,e)}},writeMapWithRef:{value:function(e){this._refer.write(e)||this.writeMap(e)}},writeObject:{value:function(e){T(this,e)}},writeObjectWithRef:{value:function(e){this._refer.write(e)||T(this,e)}},reset:{value:function(){this._classref=Object.create(null),this._fieldsref.length=0,this._refer.reset()}}}),e.Writer=i}(hprose),function(e,t){"use strict";function r(e,t){if(e&&t)throw new Error('Tag "'+t+'" expected, but "'+e+'" found in stream');if(e)throw new Error('Unexpected serialize tag "'+e+'" in stream');throw new Error("No byte found in stream")}function n(e){var t=new Z;return a(e,t),t.take()}function a(e,t){i(e,t,e.readChar())}function i(e,t,n){switch(t.write(n),n){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case $.TagNull:case $.TagEmpty:case $.TagTrue:case $.TagFalse:case $.TagNaN:break;case $.TagInfinity:t.write(e.read());break;case $.TagInteger:case $.TagLong:case $.TagDouble:case $.TagRef:u(e,t);break;case $.TagDate:case $.TagTime:o(e,t);break;case $.TagUTF8Char:c(e,t);break;case $.TagString:s(e,t);break;case $.TagGuid:f(e,t);break;case $.TagList:case $.TagMap:case $.TagObject:l(e,t);break;case $.TagClass:l(e,t),a(e,t);break;case $.TagError:a(e,t);break;default:r(n)}}function u(e,t){var r;do r=e.read(),t.write(r);while(r!==$.TagSemicolon)}function o(e,t){var r;do r=e.read(),t.write(r);while(r!==$.TagSemicolon&&r!==$.TagUTC)}function c(e,t){t.write(e.readChar())}function s(e,t){var r=e.readUntil($.TagQuote);t.write(r),
t.write($.TagQuote);var n=0;r.length>0&&(n=parseInt(r,10)),t.write(e.read(n+1))}function f(e,t){t.write(e.read(38))}function l(e,t){var r;do r=e.readChar(),t.write(r);while(r!==$.TagOpenbrace);for(;(r=e.readChar())!==$.TagClosebrace;)i(e,t,r);t.write(r)}function h(e){Object.defineProperties(this,{stream:{value:e},readRaw:{value:function(){return n(e)}}})}function v(){Object.defineProperties(this,{ref:{value:[]}})}function g(){return new v}function d(e){var r,n=global,a=e.split(".");for(r=0;r<a.length;r++)if(n=n[a[r]],n===t)return null;return n}function p(e,t,r,n){if(r<t.length){var a=t[r];e[a]=n;var i=p(e,t,r+1,".");return r+1<t.length&&null===i&&(i=p(e,t,r+1,"_")),i}var u=e.join("");try{var o=d(u);return"function"==typeof o?o:null}catch(e){return null}}function w(e){var t=K.getClass(e);if(t)return t;if(t=d(e),"function"==typeof t)return K.register(t,e),t;for(var r=[],n=e.indexOf("_");n>=0;)r[r.length]=n,n=e.indexOf("_",n+1);if(r.length>0){var a=e.split("");if(t=p(a,r,0,"."),null===t&&(t=p(a,r,0,"_")),"function"==typeof t)return K.register(t,e),t}return t=function(){},Object.defineProperties(t.prototype,{getClassName:{value:function(){return e}}}),K.register(t,e),t}function T(e,t){var r=e.readUntil(t);return 0===r.length?0:parseInt(r,10)}function y(e){var t=e.stream,n=t.readChar();switch(n){case"0":return 0;case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;case $.TagInteger:return b(t);case $.TagLong:return C(t);case $.TagDouble:return _(t);case $.TagNull:return null;case $.TagEmpty:return"";case $.TagTrue:return!0;case $.TagFalse:return!1;case $.TagNaN:return NaN;case $.TagInfinity:return E(t);case $.TagDate:return k(e);case $.TagTime:return R(e);case $.TagUTF8Char:return F(e);case $.TagString:return I(e);case $.TagGuid:return N(e);case $.TagList:return W(e);case $.TagMap:return e.useHarmonyMap?H(e):D(e);case $.TagClass:return G(e),Q(e);case $.TagObject:return q(e);case $.TagRef:return J(e);case $.TagError:throw new Error(x(e));default:r(n)}}function b(e){return T(e,$.TagSemicolon)}function m(e){var t=e.readChar();switch(t){case"0":return 0;case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;case $.TagInteger:return b(e);default:r(t)}}function C(e){var t=e.readUntil($.TagSemicolon),r=parseInt(t,10);return r.toString()===t?r:t}function O(e){var t=e.readChar();switch(t){case"0":return 0;case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;case $.TagInteger:case $.TagLong:return C(e);default:r(t)}}function _(e){return parseFloat(e.readUntil($.TagSemicolon))}function j(e){var t=e.readChar();switch(t){case"0":return 0;case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;case $.TagInteger:case $.TagLong:case $.TagDouble:return _(e);case $.TagNaN:return NaN;case $.TagInfinity:return E(e);default:r(t)}}function E(e){return e.readChar()===$.TagNeg?-(1/0):1/0}function A(e){var t=e.readChar();switch(t){case $.TagTrue:return!0;case $.TagFalse:return!1;default:r(t)}}function k(e){var t,r=e.stream,n=parseInt(r.read(4),10),a=parseInt(r.read(2),10)-1,i=parseInt(r.read(2),10),u=r.readChar();if(u===$.TagTime){var o=parseInt(r.read(2),10),c=parseInt(r.read(2),10),s=parseInt(r.read(2),10),f=0;u=r.readChar(),u===$.TagPoint&&(f=parseInt(r.read(3),10),u=r.readChar(),u>="0"&&u<="9"&&(r.skip(2),u=r.readChar(),u>="0"&&u<="9"&&(r.skip(2),u=r.readChar()))),t=u===$.TagUTC?new Date(Date.UTC(n,a,i,o,c,s,f)):new Date(n,a,i,o,c,s,f)}else t=u===$.TagUTC?new Date(Date.UTC(n,a,i)):new Date(n,a,i);return e.refer.set(t),t}function S(e){var t=e.stream.readChar();switch(t){case $.TagNull:return null;case $.TagDate:return k(e);case $.TagRef:return J(e);default:r(t)}}function R(e){var t,r=e.stream,n=parseInt(r.read(2),10),a=parseInt(r.read(2),10),i=parseInt(r.read(2),10),u=0,o=r.readChar();return o===$.TagPoint&&(u=parseInt(r.read(3),10),o=r.readChar(),o>="0"&&o<="9"&&(r.skip(2),o=r.readChar(),o>="0"&&o<="9"&&(r.skip(2),o=r.readChar()))),t=o===$.TagUTC?new Date(Date.UTC(1970,0,1,n,a,i,u)):new Date(1970,0,1,n,a,i,u),e.refer.set(t),t}function U(e){var t=e.stream.readChar();switch(t){case $.TagNull:return null;case $.TagTime:return R(e);case $.TagRef:return J(e);default:r(t)}}function F(e){return e.stream.read(1)}function M(e){var t=e.stream,r=T(t,$.TagQuote),n=t.read(r);return t.skip(1),n}function I(e){var t=M(e);return e.refer.set(t),t}function x(e){var t=e.stream.readChar();switch(t){case $.TagNull:return null;case $.TagEmpty:return"";case $.TagUTF8Char:return F(e);case $.TagString:return I(e);case $.TagRef:return J(e);default:r(t)}}function N(e){var t=e.stream;t.skip(1);var r=t.read(36);return t.skip(1),e.refer.set(r),r}function P(e){var t=e.stream.readChar();switch(t){case $.TagNull:return null;case $.TagGuid:return N(e);case $.TagRef:return J(e);default:r(t)}}function W(e){var t=e.stream,r=[];e.refer.set(r);for(var n=T(t,$.TagOpenbrace),a=0;a<n;a++)r[a]=y(e);return t.skip(1),r}function L(e){var t=e.stream.readChar();switch(t){case $.TagNull:return null;case $.TagList:return W(e);case $.TagRef:return J(e);default:r(t)}}function D(e){var t=e.stream,r={};e.refer.set(r);for(var n=T(t,$.TagOpenbrace),a=0;a<n;a++){var i=y(e),u=y(e);r[i]=u}return t.skip(1),r}function z(e){var t=e.stream.readChar();switch(t){case $.TagNull:return null;case $.TagMap:return D(e);case $.TagRef:return J(e);default:r(t)}}function H(e){var t=e.stream,r=new V;e.refer.set(r);for(var n=T(t,$.TagOpenbrace),a=0;a<n;a++){var i=y(e),u=y(e);r.set(i,u)}return t.skip(1),r}function B(e){var t=e.stream.readChar();switch(t){case $.TagNull:return null;case $.TagMap:return H(e);case $.TagRef:return J(e);default:r(t)}}function q(e){var t=e.stream,r=e.classref[T(t,$.TagOpenbrace)],n=new r.classname;e.refer.set(n);for(var a=0;a<r.count;a++)n[r.fields[a]]=y(e);return t.skip(1),n}function Q(e){var t=e.stream.readChar();switch(t){case $.TagNull:return null;case $.TagClass:return G(e),Q(e);case $.TagObject:return q(e);case $.TagRef:return J(e);default:r(t)}}function G(e){for(var t=e.stream,r=M(e),n=T(t,$.TagOpenbrace),a=[],i=0;i<n;i++)a[i]=x(e);t.skip(1),r=w(r),e.classref.push({classname:r,count:n,fields:a})}function J(e){return e.refer.read(T(e.stream,$.TagSemicolon))}function Y(e,t,r){h.call(this,e),this.useHarmonyMap=!!r,Object.defineProperties(this,{classref:{value:[]},refer:{value:t?X:g()}})}var Z=e.StringIO,$=e.Tags,K=e.ClassManager,V=e.Map;e.RawReader=h;var X=Object.create(null,{set:{value:function(){}},read:{value:function(){r($.TagRef)}},reset:{value:function(){}}});Object.defineProperties(v.prototype,{set:{value:function(e){this.ref.push(e)}},read:{value:function(e){return this.ref[e]}},reset:{value:function(){this.ref.length=0}}}),Y.prototype=Object.create(h.prototype),Y.prototype.constructor=Y,Object.defineProperties(Y.prototype,{useHarmonyMap:{value:!1,writable:!0},checkTag:{value:function(e,n){n===t&&(n=this.stream.readChar()),n!==e&&r(n,e)}},checkTags:{value:function(e,n){return n===t&&(n=this.stream.readChar()),e.indexOf(n)>=0?n:void r(n,e)}},unserialize:{value:function(){return y(this)}},readInteger:{value:function(){return m(this.stream)}},readLong:{value:function(){return O(this.stream)}},readDouble:{value:function(){return j(this.stream)}},readBoolean:{value:function(){return A(this.stream)}},readDateWithoutTag:{value:function(){return k(this)}},readDate:{value:function(){return S(this)}},readTimeWithoutTag:{value:function(){return R(this)}},readTime:{value:function(){return U(this)}},readStringWithoutTag:{value:function(){return I(this)}},readString:{value:function(){return x(this)}},readGuidWithoutTag:{value:function(){return N(this)}},readGuid:{value:function(){return P(this)}},readListWithoutTag:{value:function(){return W(this)}},readList:{value:function(){return L(this)}},readMapWithoutTag:{value:function(){return this.useHarmonyMap?H(this):D(this)}},readMap:{value:function(){return this.useHarmonyMap?B(this):z(this)}},readObjectWithoutTag:{value:function(){return q(this)}},readObject:{value:function(){return Q(this)}},reset:{value:function(){this.classref.length=0,this.refer.reset()}}}),e.Reader=Y}(hprose),function(e){"use strict";function t(e,t){var r=new n,i=new a(r,t);return i.serialize(e),r.take()}function r(e,t,r){return e instanceof n||(e=new n(e)),new i(e,t,r).unserialize()}var n=e.StringIO,a=e.Writer,i=e.Reader;e.Formatter=Object.create(null,{serialize:{value:t},unserialize:{value:r}}),e.serialize=t,e.unserialize=r}(hprose),hprose.ResultMode={Normal:0,Serialized:1,Raw:2,RawWithEndTag:3},hprose.Normal=hprose.ResultMode.Normal,hprose.Serialized=hprose.ResultMode.Serialized,hprose.Raw=hprose.ResultMode.Raw,hprose.RawWithEndTag=hprose.ResultMode.RawWithEndTag,function(e,t){"use strict";function r(){}function n(e,n,a){function i(e,t){for(var r=0,n=Qe.length;r<n;r++)e=Qe[r].outputFilter(e,t);return e}function v(e,t){for(var r=Qe.length-1;r>=0;r--)e=Qe[r].inputFilter(e,t);return e}function m(e,t){return e=i(e,t),tt(e,t).then(function(e){if(!t.oneway)return v(e,t)})}function C(e,t){return ut.sendAndReceive(e,t).catchError(function(r){var n=j(e,t);if(null!==n)return n;throw r})}function O(e,t,r,n){et(e,t).then(r,n)}function _(){var e=Me.length;if(e>1){var t=Ie+1;t>=e&&(t=0,ze++),Ie=t,Fe=Me[Ie]}else ze++;typeof ut.onfailswitch===y&&ut.onfailswitch(ut)}function j(e,t){if(t.failswitch&&_(),t.idempotent&&t.retried<t.retry){var r=500*++t.retried;return t.failswitch&&(r-=500*(Me.length-1)),r>5e3&&(r=5e3),r>0?h.delayed(r,function(){return C(e,t)}):C(e,t)}return null}function E(e){var t={retry:We,retried:0,idempotent:!0,failswitch:!0,timeout:Pe,client:ut,userdata:{}},r=function(t){var r=null;try{var n=new s(t),a=new l(n,(!0)),i=n.readChar();switch(i){case o.TagError:r=new Error(a.readString());break;case o.TagFunctions:var u=a.readList();a.checkTag(o.TagEnd),S(e,u);break;default:r=new Error("Wrong Response:\r\n"+t)}}catch(e){r=e}null!==r?Ye.reject(r):Ye.resolve(e)};O(d,t,r,Ye.reject)}function A(e,t){return function(){return Ge?x(e,t,Array.slice(arguments),!0):h.all(arguments).then(function(r){return x(e,t,r,!1)})}}function k(e,r,n,a,i){if(r[a]===t&&(r[a]={},typeof i!==w&&i.constructor!==Object||(i=[i]),Array.isArray(i)))for(var u=0;u<i.length;u++){var o=i[u];if(typeof o===w)r[a][o]=A(e,n+a+"_"+o);else for(var c in o)k(e,r[a],a+"_",c,o[c])}}function S(e,r){for(var n=0;n<r.length;n++){var a=r[n];if(typeof a===w)e[a]===t&&(e[a]=A(e,a));else for(var i in a)k(e,e,"",i,a[i])}}function R(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;++n)t[n]=e[n]}function U(e){return e?{mode:c.Normal,byref:xe,simple:Ne,onsuccess:t,onerror:t,useHarmonyMap:qe,client:ut,userdata:{}}:{mode:c.Normal,byref:xe,simple:Ne,timeout:Pe,retry:We,retried:0,idempotent:Le,failswitch:De,oneway:!1,sync:!1,onsuccess:t,onerror:t,useHarmonyMap:qe,client:ut,userdata:{}}}function F(e,t,r,n){var a=U(n);if(t in e){var i=e[t];for(var u in i)u in a&&(a[u]=i[u])}for(var o=0,c=r.length;o<c&&typeof r[o]!==y;++o);if(o===c)return a;var s=r.splice(o,c-o);for(a.onsuccess=s[0],c=s.length,o=1;o<c;++o){var f=s[o];switch(typeof f){case y:a.onerror=f;break;case p:a.byref=f;break;case T:a.mode=f;break;case b:for(var l in f)l in a&&(a[l]=f[l])}}return a}function M(e,t,r){var n=new s;n.write(o.TagCall);var a=new f(n,r.simple);return a.writeString(e),(t.length>0||r.byref)&&(a.reset(),a.writeList(t),r.byref&&a.writeBoolean(!0)),n}function I(e,t,r,n){return He?h.promise(function(a,i){Be.push({batch:n,name:e,args:t,context:r,resolve:a,reject:i})}):n?D(e,t,r):L(e,t,r)}function x(e,t,r,n){return I(t,r,F(e,t,r,n),n)}function N(e,t,r,n){try{r.onerror?r.onerror(e,t):ut.onerror&&ut.onerror(e,t),n(t)}catch(e){n(e)}}function P(e,t,r){var n=M(e,t,r);return n.write(o.TagEnd),h.promise(function(e,a){O(n.toString(),r,function(n){if(r.oneway)return void e();var i=null,u=null;try{if(r.mode===c.RawWithEndTag)i=n;else if(r.mode===c.Raw)i=n.substring(0,n.length-1);else{var f=new s(n),h=new l(f,(!1),r.useHarmonyMap),v=f.readChar();if(v===o.TagResult){if(i=r.mode===c.Serialized?h.readRaw():h.unserialize(),v=f.readChar(),v===o.TagArgument){h.reset();var g=h.readList();R(g,t),v=f.readChar()}}else v===o.TagError&&(u=new Error(h.readString()),v=f.readChar());v!==o.TagEnd&&(u=new Error("Wrong Response:\r\n"+n))}}catch(e){u=e}u?a(u):e(i)},a)})}function W(e){return function(){e&&(He=!1,u(function(e){e.forEach(function(e){"settings"in e?q(e.settings).then(e.resolve,e.reject):I(e.name,e.args,e.context,e.batch).then(e.resolve,e.reject)})},Be),Be=[])}}function L(e,t,r){r.sync&&(He=!0);var n=h.promise(function(n,a){Ve(e,t,r).then(function(i){try{if(r.onsuccess)try{r.onsuccess(i,t)}catch(t){r.onerror&&r.onerror(e,t),a(t)}n(i)}catch(e){a(e)}},function(t){N(e,t,r,a)})});return n.whenComplete(W(r.sync)),n}function D(e,t,r){return h.promise(function(n,a){Je.push({args:t,name:e,context:r,resolve:n,reject:a})})}function z(e){var t={timeout:Pe,retry:We,retried:0,idempotent:Le,failswitch:De,oneway:!1,sync:!1,client:ut,userdata:{}};for(var r in e)r in t&&(t[r]=e[r]);return t}function H(e,t){var r=e.reduce(function(e,t){return e.write(M(t.name,t.args,t.context)),e},new s);return r.write(o.TagEnd),h.promise(function(n,a){O(r.toString(),t,function(r){if(t.oneway)return void n(e);var i=-1,u=new s(r),f=new l(u,(!1),(!1)),h=u.readChar();try{for(;h!==o.TagEnd;){var v=null,g=null,d=e[++i].context.mode;if(d>=c.Raw&&(v=new s),h===o.TagResult){if(d===c.Serialized?v=f.readRaw():d>=c.Raw?(v.write(o.TagResult),v.write(f.readRaw())):(f.useHarmonyMap=e[i].context.useHarmonyMap,f.reset(),v=f.unserialize()),h=u.readChar(),h===o.TagArgument){if(d>=c.Raw)v.write(o.TagArgument),v.write(f.readRaw());else{f.reset();var p=f.readList();R(p,e[i].args)}h=u.readChar()}}else h===o.TagError&&(d>=c.Raw?(v.write(o.TagError),v.write(f.readRaw())):(f.reset(),g=new Error(f.readString())),h=u.readChar());if([o.TagEnd,o.TagResult,o.TagError].indexOf(h)<0)return void a(new Error("Wrong Response:\r\n"+r));d>=c.Raw?(d===c.RawWithEndTag&&v.write(o.TagEnd),e[i].result=v.toString()):e[i].result=v,e[i].error=g}}catch(e){return void a(e)}n(e)},a)})}function B(){Ge=!0}function q(e){if(e=e||{},Ge=!1,He)return h.promise(function(t,r){Be.push({batch:!0,settings:e,resolve:t,reject:r})});var t=Je.length;if(0===t)return h.value([]);var r=z(e);r.sync&&(He=!0);var n=Je;Je=[];var a=h.promise(function(e,t){Xe(n,r).then(function(t){t.forEach(function(e){if(e.error)N(e.name,e.error,e.context,e.reject);else try{if(e.context.onsuccess)try{e.context.onsuccess(e.result,e.args)}catch(t){e.context.onerror&&e.context.onerror(e.name,t),e.reject(t)}e.resolve(e.result)}catch(t){e.reject(t)}delete e.context,delete e.resolve,delete e.reject}),e(t)},function(e){n.forEach(function(t){"reject"in t&&N(t.name,e,t.context,t.reject)}),t(e)})});return a.whenComplete(W(r.sync)),a}function Q(){return Fe}function G(){return Me}function J(e){if(typeof e===w)Me=[e];else{if(!Array.isArray(e))return;Me=e.slice(0),Me.sort(function(){return Math.random()-.5})}Ie=0,Fe=Me[Ie]}function Y(){return De}function Z(e){De=!!e}function $(){return ze}function K(){return Pe}function V(e){Pe="number"==typeof e?0|e:0}function X(){return We}function ee(e){We="number"==typeof e?0|e:0}function te(){return Le}function re(e){Le=!!e}function ne(e){Ke=!!e}function ae(){return Ke}function ie(){return xe}function ue(e){xe=!!e}function oe(){return Ne}function ce(e){Ne=!!e}function se(){return qe}function fe(e){qe=!!e}function le(){return 0===Qe.length?null:1===Qe.length?Qe[0]:Qe.slice()}function he(e){Qe.length=0,Array.isArray(e)?e.forEach(function(e){ve(e)}):ve(e)}function ve(e){e&&"function"==typeof e.inputFilter&&"function"==typeof e.outputFilter&&Qe.push(e)}function ge(e){var t=Qe.indexOf(e);return t!==-1&&(Qe.splice(t,1),!0)}function de(){return Qe}function pe(e,r,n){n===t&&(typeof r===p&&(n=r,r=!1),r||(typeof e===p?(n=e,e=!1):(e&&e.constructor===Object||Array.isArray(e))&&(r=e,e=!1)));var a=ut;return n&&(a={}),e||Fe?(e&&(Fe=e),(typeof r===w||r&&r.constructor===Object)&&(r=[r]),Array.isArray(r)?(S(a,r),Ye.resolve(a),a):(u(E,a),Ye)):new Error("You should set server uri first!")}function we(e,t,n){var a=arguments.length;if(a<1||typeof e!==w)throw new Error("name must be a string");if(1===a&&(t=[]),2===a&&!Array.isArray(t)){var i=[];typeof t!==y&&i.push(r),i.push(t),t=i}if(a>2){typeof n!==y&&t.push(r);for(var u=2;u<a;u++)t.push(arguments[u])}return x(ut,e,t,Ge)}function Te(e,t){return Ye.then(e,t)}function ye(e,t){if(Ze[e]){var r=Ze[e];if(r[t])return r[t]}return null}function be(e,r,n,a,i){if(typeof e!==w)throw new TypeError("topic name must be a string.");if(r===t||null===r){if(typeof n!==y)throw new TypeError("callback must be a function.");r=n}if(Ze[e]||(Ze[e]=Object.create(null)),typeof r===y)return a=n,n=r,void Ee().then(function(t){be(e,t,n,a,i)});if(typeof n!==y)throw new TypeError("callback must be a function.");if(h.isPromise(r))return void r.then(function(t){be(e,t,n,a,i)});a===t&&(a=Pe);var u=ye(e,r);if(null===u){var o=function(){x(ut,e,[r,u.handler,o,{idempotent:!0,failswitch:i,timeout:a}],!1)};u={handler:function(t){var n=ye(e,r);if(n){if(null!==t)for(var a=n.callbacks,i=0,u=a.length;i<u;++i)try{a[i](t)}catch(e){}null!==ye(e,r)&&o()}},callbacks:[n]},Ze[e][r]=u,o()}else u.callbacks.indexOf(n)<0&&u.callbacks.push(n)}function me(e,t,r){if(e)if(typeof r===y){var n=e[t];if(n){var a=n.callbacks,i=a.indexOf(r);i>=0&&(a[i]=a[a.length-1],a.length--),0===a.length&&delete e[t]}}else delete e[t]}function Ce(e,r,n){if(typeof e!==w)throw new TypeError("topic name must be a string.");if(r===t||null===r){if(typeof n!==y)return void delete Ze[e];r=n}if(typeof r===y&&(n=r,r=null),null===r)if(null===$e){if(Ze[e]){var a=Ze[e];for(r in a)me(a,r,n)}}else $e.then(function(t){Ce(e,t,n)});else h.isPromise(r)?r.then(function(t){Ce(e,t,n)}):me(Ze[e],r,n);g(Ze[e])&&delete Ze[e]}function Oe(e){return!!Ze[e]}function _e(){var e=[];for(var t in Ze)e.push(t);return e}function je(){return $e}function Ee(){return null===$e&&($e=x(ut,"#",[],!1)),$e}function Ae(e){rt.push(e),Ve=rt.reduceRight(function(e,t){return function(r,n,a){return h.sync(function(){return t(r,n,a,e)})}},P)}function ke(e){nt.push(e),Xe=nt.reduceRight(function(e,t){return function(r,n){return h.sync(function(){return t(r,n,e)})}},H)}function Se(e){at.push(e),et=at.reduceRight(function(e,t){return function(r,n){return h.sync(function(){return t(r,n,e)})}},m)}function Re(e){it.push(e),tt=it.reduceRight(function(e,t){return function(r,n){return h.sync(function(){return t(r,n,e)})}},C)}function Ue(e){return Ae(e),ut}var Fe,Me=[],Ie=-1,xe=!1,Ne=!1,Pe=3e4,We=10,Le=!1,De=!1,ze=0,He=!1,Be=[],qe=!1,Qe=[],Ge=!1,Je=[],Ye=new h,Ze=Object.create(null),$e=null,Ke=!0,Ve=P,Xe=H,et=m,tt=C,rt=[],nt=[],at=[],it=[],ut=this;Ee.sync=!0,Ee.idempotent=!0,Ee.failswitch=!0;var ot=Object.create(null,{begin:{value:B},end:{value:q},use:{value:function(e){return ke(e),ot}}}),ct=Object.create(null,{use:{value:function(e){return Se(e),ct}}}),st=Object.create(null,{use:{value:function(e){return Re(e),st}}});Object.defineProperties(this,{"#":{value:Ee},onerror:{value:null,writable:!0},onfailswitch:{value:null,writable:!0},uri:{get:Q},uriList:{get:G,set:J},id:{get:je},failswitch:{get:Y,set:Z},failround:{get:$},timeout:{get:K,set:V},retry:{get:X,set:ee},idempotent:{get:te,set:re},keepAlive:{get:ae,set:ne},byref:{get:ie,set:ue},simple:{get:oe,set:ce},useHarmonyMap:{get:se,set:fe},filter:{get:le,set:he},addFilter:{value:ve},removeFilter:{value:ge},filters:{get:de},useService:{value:pe},invoke:{value:we},ready:{value:Te},subscribe:{value:be},unsubscribe:{value:Ce},isSubscribed:{value:Oe},subscribedList:{value:_e},use:{value:Ue},batch:{value:ot},beforeFilter:{value:ct},afterFilter:{value:st}}),a&&typeof a===b&&["failswitch","timeout","retry","idempotent","keepAlive","byref","simple","useHarmonyMap","filter"].forEach(function(e){e in a&&ut[e](a[e])}),e&&(J(e),pe(n))}function a(e){var t=v(e),r=t.protocol;if("http:"!==r&&"https:"!==r)throw new Error("The "+r+" client isn't implemented.")}function i(t,r,n){try{return e.HttpClient.create(t,r,n)}catch(e){}if("string"==typeof t)a(t);else if(Array.isArray(t))throw t.forEach(function(e){a(e)}),new Error("Not support multiple protocol.");throw new Error("You should set server uri first!")}var u=e.setImmediate,o=e.Tags,c=e.ResultMode,s=e.StringIO,f=e.Writer,l=e.Reader,h=e.Future,v=e.parseuri,g=e.isObjectEmpty,d=(e.Map,o.TagEnd),p="boolean",w="string",T="number",y="function",b="object";Object.defineProperties(n,{create:{value:i}}),e.Client=n}(hprose),function(e){"use strict";function t(e,r,n){function u(e,t){var r=new i,n={};for(var a in s)n[a]=s[a];return n["Content-Type"]="text/plain; charset=UTF-8",wx.request({url:f.uri,method:"POST",data:e,header:n,timeout:t.timeout,complete:function(e){200===parseInt(e.statusCode,10)?r.resolve(e.data):r.reject(new Error(e.statusCode+":"+e.data))}}),r}function o(e,t){var r=u(e,t);return t.oneway&&r.resolve(),r}function c(e,t){"content-type"!==e.toLowerCase()&&(t?s[e]=t:delete s[e])}if(this.constructor!==t)return new t(e,r,n);a.call(this,e,r,n);var s=Object.create(null),f=this;Object.defineProperties(this,{setHeader:{value:c},sendAndReceive:{value:o}})}function r(e){var t=u(e);if("http:"!==t.protocol&&"https:"!==t.protocol)throw new Error("This client desn't support "+t.protocol+" scheme.")}function n(e,n,a){if("string"==typeof e)r(e);else{if(!Array.isArray(e))throw new Error("You should set server uri first!");e.forEach(function(e){r(e)})}return new t(e,n,a)}var a=e.Client,i=e.Future,u=e.parseuri;Object.defineProperties(t,{create:{value:n}}),e.HttpClient=t}(hprose),function(e){"use strict";function t(e){this.version=e||"2.0"}var r=e.Tags,n=e.StringIO,a=e.Writer,i=e.Reader,u=1;t.prototype.inputFilter=function(e){"{"===e.charAt(0)&&(e="["+e+"]");for(var t=JSON.parse(e),i=new n,u=new a(i,(!0)),o=0,c=t.length;o<c;++o){var s=t[o];s.error?(i.write(r.TagError),u.writeString(s.error.message)):(i.write(r.TagResult),u.serialize(s.result))}return i.write(r.TagEnd),i.take()},t.prototype.outputFilter=function(e){var t=[],a=new n(e),o=new i(a,(!1),(!1)),c=a.readChar();do{var s={};c===r.TagCall&&(s.method=o.readString(),c=a.readChar(),c===r.TagList&&(s.params=o.readListWithoutTag(),c=a.readChar()),c===r.TagTrue&&(c=a.readChar())),"1.1"===this.version?s.version="1.1":"2.0"===this.version&&(s.jsonrpc="2.0"),s.id=u++,t.push(s)}while(c===r.TagCall);return t.length>1?JSON.stringify(t):JSON.stringify(t[0])},e.JSONRPCClientFilter=t}(hprose),hprose.common={Completer:hprose.Completer,Future:hprose.Future,ResultMode:hprose.ResultMode},hprose.io={BytesIO:hprose.BytesIO,ClassManager:hprose.ClassManager,Tags:hprose.Tags,RawReader:hprose.RawReader,Reader:hprose.Reader,Writer:hprose.Writer,Formatter:hprose.Formatter},hprose.client={Client:hprose.Client,HttpClient:hprose.HttpClient,TcpClient:hprose.TcpClient,WebSocketClient:hprose.WebSocketClient},hprose.filter={JSONRPCClientFilter:hprose.JSONRPCClientFilter},module.exports=hprose;